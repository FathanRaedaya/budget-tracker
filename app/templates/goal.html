{% extends "base.html" %}

{% block title %}Goals{% endblock %}

{% block content %}
    <div class="container mt-4">
        <h1>Create A Goal:</h1>

        <form action="{{ url_for('goal') }}" method="post" name="goal_form" id="goal_form">
            {{ form.hidden_tag() }}
            
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-prepend">
                    <span class="input-group-text">Name</span>
                </div>
                {{ form.name(class="form-control", required=true) }}
                </div>
            </div>

            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Goal Target (Â£)</span>
                    </div>
                    {{ form.value(class="form-control", type="number", step="0.01", required=true) }}
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Create Goal</button>
        </form>

        {% if current_goal %}
            <div class="mt-4">
                <h3>Edit Your Current Goal:</h3>
            </div>
            
            <form action="{{ url_for('edit_goal') }}" method="post" name="edit_goal_form" id="edit_goal_form">
                {{ form.hidden_tag() }}
                <div class="form-group">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Edit Name</span>
                        </div>
                        <input type="text" id="name" name="name" class="form-control" value="{{ form.name.data }}">
                    </div>
                </div>

                <div class="form-group">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Edit Goal Target:</span>
                        </div>
                        <input type="text" id="value" name="value" class="form-control" value="{{ form.value.data }}">
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" onclick="document.getElementById('edit_goal_form').submit()">Save Changes</button>
            </form>

            <form action="{{ url_for('delete_goal') }}" method="post" class="mt-3">
                {{ form.hidden_tag() }}
                <button type="submit" class="btn btn-danger">Delete Goal</button>
            </form>
        {% endif %}
    </div>
{% endblock %}
